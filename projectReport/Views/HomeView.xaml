<UserControl x:Class="ProjectReport.Views.HomeView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:inventory="clr-namespace:ProjectReport.Views.Inventory"
             mc:Ignorable="d">

    <Grid>
        <TabControl>

            <!-- TAB 1: DASHBOARD (TU HOME ACTUAL) -->
            <TabItem Header="Dashboard">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />   <!-- Dashboard -->
                        <RowDefinition Height="Auto" />   <!-- Filters -->
                        <RowDefinition Height="*" />      <!-- Grid -->
                    </Grid.RowDefinitions>

                    <!-- DASHBOARD CARD -->
                    <Border Grid.Row="0"
                            Background="White"
                            CornerRadius="8"
                            Padding="20"
                            BorderBrush="#DDD"
                            BorderThickness="1"
                            Margin="0,0,0,16">
                        <StackPanel>
                            <TextBlock Text="PROJECT REPORT MANAGER"
                                       FontSize="22"
                                       FontWeight="Bold"
                                       Margin="0,0,0,4" />
                            <TextBlock Text="Well Selector Dashboard"
                                       FontSize="12"
                                       Foreground="#777"
                                       Margin="0,0,0,16" />

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition />
                                    <ColumnDefinition />
                                    <ColumnDefinition />
                                    <ColumnDefinition />
                                    <ColumnDefinition />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>

                                <!-- TOTAL WELLS -->
                                <StackPanel Grid.Column="0" HorizontalAlignment="Center">
                                    <TextBlock Text="TOTAL WELLS"
                                               FontSize="11"
                                               FontWeight="SemiBold"
                                               Foreground="#666"
                                               Margin="0,0,0,4" />
                                    <TextBlock Text="{Binding TotalWells}"
                                               FontSize="20"
                                               FontWeight="Bold"
                                               Foreground="Black" />
                                </StackPanel>

                                <!-- DRAFT -->
                                <StackPanel Grid.Column="1" HorizontalAlignment="Center">
                                    <TextBlock Text="DRAFT"
                                               FontSize="11"
                                               FontWeight="SemiBold"
                                               Foreground="#666"
                                               Margin="0,0,0,4" />
                                    <TextBlock Text="{Binding DraftWells}"
                                               FontSize="20"
                                               FontWeight="Bold"
                                               Foreground="#FFA500" />
                                </StackPanel>

                                <!-- IN PROGRESS -->
                                <StackPanel Grid.Column="2" HorizontalAlignment="Center">
                                    <TextBlock Text="IN PROGRESS"
                                               FontSize="11"
                                               FontWeight="SemiBold"
                                               Foreground="#666"
                                               Margin="0,0,0,4" />
                                    <TextBlock Text="{Binding InProgressWells}"
                                               FontSize="20"
                                               FontWeight="Bold"
                                               Foreground="#0078D7" />
                                </StackPanel>

                                <!-- COMPLETED -->
                                <StackPanel Grid.Column="3" HorizontalAlignment="Center">
                                    <TextBlock Text="COMPLETED"
                                               FontSize="11"
                                               FontWeight="SemiBold"
                                               Foreground="#666"
                                               Margin="0,0,0,4" />
                                    <TextBlock Text="{Binding CompletedWells}"
                                               FontSize="20"
                                               FontWeight="Bold"
                                               Foreground="Green" />
                                </StackPanel>

                                <!-- ARCHIVED -->
                                <StackPanel Grid.Column="4" HorizontalAlignment="Center">
                                    <TextBlock Text="ARCHIVED"
                                               FontSize="11"
                                               FontWeight="SemiBold"
                                               Foreground="#666"
                                               Margin="0,0,0,4" />
                                    <TextBlock Text="{Binding ArchivedWells}"
                                               FontSize="20"
                                               FontWeight="Bold"
                                               Foreground="#888" />
                                </StackPanel>

                                <!-- OPERATORS -->
                                <StackPanel Grid.Column="5" HorizontalAlignment="Center">
                                    <TextBlock Text="OPERATORS"
                                               FontSize="11"
                                               FontWeight="SemiBold"
                                               Foreground="#666"
                                               Margin="0,0,0,4" />
                                    <TextBlock Text="{Binding ActiveOperators}"
                                               FontSize="20"
                                               FontWeight="Bold"
                                               Foreground="#800080" />
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- FILTROS / ACCIONES -->
                    <Grid Grid.Row="1" Margin="0,0,0,12">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="220" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <!-- SEARCH -->
                        <TextBox Grid.Column="0"
                                 Margin="0,0,8,0"
                                 VerticalAlignment="Center"
                                 Height="28"
                                 Padding="6,2"
                                 Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}" />

                        <!-- SORT -->
                        <ComboBox Grid.Column="1"
                                  Margin="0,0,8,0"
                                  Height="28"
                                  VerticalAlignment="Center"
                                  ItemsSource="{Binding SortOptions}"
                                  SelectedItem="{Binding SelectedSortOption}" />

                        <!-- CLEAR FILTERS -->
                        <Button Grid.Column="2"
                                Margin="0,0,8,0"
                                Content="Clear Filters"
                                Padding="12,4"
                                VerticalAlignment="Center"
                                Command="{Binding ClearFiltersCommand}" />

                        <!-- NEW WELL -->
                        <Button Grid.Column="3"
                                Background="{DynamicResource OrangeBrush}"
                                Foreground="White"
                                Padding="16,4"
                                Content="New Well"
                                VerticalAlignment="Center"
                                Command="{Binding NewWellCommand}" />
                    </Grid>

                    <!-- WELLS DATAGRID -->
                    <Border Grid.Row="2"
                            Background="White"
                            BorderBrush="#DDD"
                            BorderThickness="1"
                            CornerRadius="6">
                        <DataGrid ItemsSource="{Binding WellsView}"
                                  AutoGenerateColumns="False"
                                  CanUserAddRows="False"
                                  IsReadOnly="True"
                                  HeadersVisibility="Column"
                                  GridLinesVisibility="Horizontal"
                                  Margin="0"
                                  RowHeaderWidth="0"
                                  ColumnHeaderHeight="28">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Well"
                                                    Binding="{Binding WellName}"
                                                    Width="*" />
                                <DataGridTextColumn Header="Operator"
                                                    Binding="{Binding Operator}"
                                                    Width="*" />
                                <DataGridTextColumn Header="Field"
                                                    Binding="{Binding Field}"
                                                    Width="*" />
                                <DataGridTextColumn Header="Block"
                                                    Binding="{Binding Block}"
                                                    Width="*" />
                                <DataGridTextColumn Header="Status"
                                                    Binding="{Binding Status}"
                                                    Width="120" />
                                <DataGridTextColumn Header="Last Modified"
                                                    Binding="{Binding LastModified, StringFormat=g}"
                                                    Width="160" />

                                <!-- ACTIONS -->
                                <DataGridTemplateColumn Header="Actions" Width="260">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal"
                                                        HorizontalAlignment="Center">
                                                <Button Content="Open"
                                                        Margin="2"
                                                        Padding="6,2"
                                                        Command="{Binding DataContext.OpenWellCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                        CommandParameter="{Binding}" />
                                                <Button Content="Edit"
                                                        Margin="2"
                                                        Padding="6,2"
                                                        Command="{Binding DataContext.EditWellDataCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                        CommandParameter="{Binding}" />
                                                <Button Content="Duplicate"
                                                        Margin="2"
                                                        Padding="6,2"
                                                        Command="{Binding DataContext.DuplicateWellCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                        CommandParameter="{Binding}" />
                                                <Button Content="Archive"
                                                        Margin="2"
                                                        Padding="6,2"
                                                        Command="{Binding DataContext.ArchiveWellCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                        CommandParameter="{Binding}" />
                                                <Button Content="Delete"
                                                        Margin="2"
                                                        Padding="6,2"
                                                        Background="#CC3333"
                                                        Foreground="White"
                                                        Command="{Binding DataContext.DeleteWellCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                        CommandParameter="{Binding}" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </Border>
                </Grid>
            </TabItem>

        </TabControl>
    </Grid>
</UserControl>
